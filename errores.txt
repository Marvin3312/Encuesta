// index.js
require('dotenv').config();
const express = require('express');
const sql = require('mssql');
const cors = require('cors');

const app = express();

app.use(
    cors({
        origin: ['https://marvin3312.github.io'],
        methods: ['GET', 'POST', 'OPTIONS'],
        allowedHeaders: ['Content-Type', 'Authorization'],
        optionsSuccessStatus: 204
    })
);

app.use(express.json());

// Configuraci√≥n SQL Server
const sqlConfig = {
    user: process.env.DB_USER || 'UsuarioEncuestas',
    password: process.env.DB_PASS || 'DesaWeb2025$!',
    server: process.env.DB_HOST || 'svr-sql-ctezo.southcentralus.cloudapp.azure.com',
    database: process.env.DB_NAME || 'db_WebDevUMG',
    options: {
        encrypt: true,
        trustServerCertificate: true
    },
    pool: {
        max: 10,
        min: 0,
        idleTimeoutMillis: 30000
    }
};